piepline {
    agent any 

    parameters {
  string defaultValue: 'main', name: 'branch', trim: true
}

    environment {
  BRANCH_NAME = "${branch}"
}

    stages {
        stage('BUILD') {
            steps{
                sh '''
                echo "this is build stage"
                '''
            }
        }
        stage('TESTING'){
              parallel {
                stage('testing in windows'){
                    when {
                        branch 'master'
                stage('STAGE-1') {
                    }
                    steps{
                        sh "echo STEGE-2 executes if branch is master"
                    }
                }
            }
            stage('testing in cli'){
                    when {
                        branch 'master'
                    }
                    steps{
                        sh "echo STEGE-2 executes if branch is master"
                    }
                }
            }        
        }    
    }
}
